CREATE TABLE [dbo].[Roles] (
    [RoleId] INT           IDENTITY (1, 1) NOT NULL,
    [Name]   NVARCHAR (20) NOT NULL,
    PRIMARY KEY CLUSTERED ([RoleId] ASC)
);



CREATE TABLE [dbo].[Users] (
    [UserId]       INT             IDENTITY (1, 1) NOT NULL,
    [FirstName]    NVARCHAR (100)  NOT NULL,
    [LastName]     NVARCHAR (100)  NOT NULL,
    [Email]        NVARCHAR (100)  NOT NULL,
    [Phone]        NVARCHAR (15)   NOT NULL,
    [PasswordHash] VARBINARY (254) NOT NULL,
    [PasswordSalt] VARBINARY (254) NOT NULL,
    [RoleId]       INT             NOT NULL,
    PRIMARY KEY CLUSTERED ([UserId] ASC),
    UNIQUE NONCLUSTERED ([Email] ASC),
    FOREIGN KEY ([RoleId]) REFERENCES [dbo].[Roles] ([RoleId])
);



CREATE TABLE [dbo].[Events] (
    [EventId]   INT            IDENTITY (1, 1) NOT NULL,
    [Name]      NVARCHAR (500) NOT NULL,
    [EventDate] DATETIME       NOT NULL,
    [Location]  NVARCHAR (100) NOT NULL,
    PRIMARY KEY CLUSTERED ([EventId] ASC)
);



CREATE TABLE [dbo].[Tickets] (
    [TicketId] INT             IDENTITY (1, 1) NOT NULL,
    [Price]    DECIMAL (18, 2) NOT NULL,
    [EventId]  INT             NOT NULL,
    PRIMARY KEY CLUSTERED ([TicketId] ASC),
    FOREIGN KEY ([EventId]) REFERENCES [dbo].[Events] ([EventId])
);



CREATE TABLE [dbo].[Reservations] (
    [ReservationId]     INT           IDENTITY (1, 1) NOT NULL,
    [UserId]            INT           NOT NULL,
    [TicketId]          INT           NOT NULL,
    [ReservationDate]   DATETIME      NOT NULL,
    [ReservationStatus] NVARCHAR (10) NOT NULL,
    PRIMARY KEY CLUSTERED ([ReservationId] ASC),
    FOREIGN KEY ([TicketId]) REFERENCES [dbo].[Tickets] ([TicketId]),
    FOREIGN KEY ([UserId]) REFERENCES [dbo].[Users] ([UserId])
);